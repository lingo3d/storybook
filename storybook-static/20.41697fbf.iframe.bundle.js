(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"./node_modules/lingo3d/lib/display/core/SimpleObjectManager/PhysicsItem/enableCannon.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _cannon_loadCannon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lingo3d/lib/display/core/SimpleObjectManager/PhysicsItem/cannon/loadCannon.js"),_cannon_cannonLoop__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lingo3d/lib/display/core/SimpleObjectManager/PhysicsItem/cannon/cannonLoop.js"),_engine_scene__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lingo3d/lib/engine/scene/index.js");const physicsGroups=[1,2,4,8,16,32],physicsGroupIndexes=[0,1,2,3,4,5];__webpack_exports__.default=async function(handle){var _a,_b;if(handle.done)return;_engine_scene__WEBPACK_IMPORTED_MODULE_2__.a.attach(this.outerObject3d);const{slipperyMaterial:slipperyMaterial,defaultMaterial:defaultMaterial,world:world,Body:Body,Vec3:Vec3}=await Object(_cannon_loadCannon__WEBPACK_IMPORTED_MODULE_0__.a)();if(handle.done)return;const body=this.cannonBody=new Body({mass:null!==(_a=this._mass)&&void 0!==_a?_a:1,material:this._slippery?slipperyMaterial:defaultMaterial,collisionFilterGroup:physicsGroups[null!==(_b=this._physicsGroup)&&void 0!==_b?_b:0],collisionFilterMask:physicsGroupIndexes.filter((index=>{var _a;return!(null===(_a=this._ignorePhysicsGroups)||void 0===_a?void 0:_a.includes(index))})).map((index=>physicsGroups[index])).reduce(((acc,curr)=>acc+curr),0)});await this._physicsShape(),handle.done||("2d"===this._physics&&(body.angularFactor=new Vec3(0,0,1),body.linearFactor=new Vec3(1,1,0)),this._noTumble&&(body.angularFactor=new Vec3(0,0,0)),body.position.copy(this.outerObject3d.position),body.quaternion.copy(this.outerObject3d.quaternion),this.physicsUpdate={},world.addBody(body),_cannon_cannonLoop__WEBPACK_IMPORTED_MODULE_1__.c.add(this),handle.then((()=>{world.removeBody(body),_cannon_cannonLoop__WEBPACK_IMPORTED_MODULE_1__.c.delete(this),this.cannonBody=void 0,this.physicsUpdate=void 0})))}}}]);