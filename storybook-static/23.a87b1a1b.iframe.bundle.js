(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"./node_modules/three/examples/jsm/controls/TransformControls.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TransformControls",(function(){return TransformControls})),__webpack_require__.d(__webpack_exports__,"TransformControlsGizmo",(function(){return TransformControlsGizmo})),__webpack_require__.d(__webpack_exports__,"TransformControlsPlane",(function(){return TransformControlsPlane}));var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/three/build/three.module.js");const _raycaster=new three__WEBPACK_IMPORTED_MODULE_0__.Dc,_tempVector=new three__WEBPACK_IMPORTED_MODULE_0__.ud,_tempVector2=new three__WEBPACK_IMPORTED_MODULE_0__.ud,_tempQuaternion=new three__WEBPACK_IMPORTED_MODULE_0__.uc,_unit={X:new three__WEBPACK_IMPORTED_MODULE_0__.ud(1,0,0),Y:new three__WEBPACK_IMPORTED_MODULE_0__.ud(0,1,0),Z:new three__WEBPACK_IMPORTED_MODULE_0__.ud(0,0,1)},_changeEvent={type:"change"},_mouseDownEvent={type:"mouseDown"},_mouseUpEvent={type:"mouseUp",mode:null},_objectChangeEvent={type:"objectChange"};class TransformControls extends three__WEBPACK_IMPORTED_MODULE_0__.ec{constructor(camera,domElement){super(),void 0===domElement&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),domElement=document),this.visible=!1,this.domElement=domElement,this.domElement.style.touchAction="none";const _gizmo=new TransformControlsGizmo;this._gizmo=_gizmo,this.add(_gizmo);const _plane=new TransformControlsPlane;this._plane=_plane,this.add(_plane);const scope=this;function defineProperty(propName,defaultValue){let propValue=defaultValue;Object.defineProperty(scope,propName,{get:function(){return void 0!==propValue?propValue:defaultValue},set:function(value){propValue!==value&&(propValue=value,_plane[propName]=value,_gizmo[propName]=value,scope.dispatchEvent({type:propName+"-changed",value:value}),scope.dispatchEvent(_changeEvent))}}),scope[propName]=defaultValue,_plane[propName]=defaultValue,_gizmo[propName]=defaultValue}defineProperty("camera",camera),defineProperty("object",void 0),defineProperty("enabled",!0),defineProperty("axis",null),defineProperty("mode","translate"),defineProperty("translationSnap",null),defineProperty("rotationSnap",null),defineProperty("scaleSnap",null),defineProperty("space","world"),defineProperty("size",1),defineProperty("dragging",!1),defineProperty("showX",!0),defineProperty("showY",!0),defineProperty("showZ",!0);const worldPosition=new three__WEBPACK_IMPORTED_MODULE_0__.ud,worldPositionStart=new three__WEBPACK_IMPORTED_MODULE_0__.ud,worldQuaternion=new three__WEBPACK_IMPORTED_MODULE_0__.uc,worldQuaternionStart=new three__WEBPACK_IMPORTED_MODULE_0__.uc,cameraPosition=new three__WEBPACK_IMPORTED_MODULE_0__.ud,cameraQuaternion=new three__WEBPACK_IMPORTED_MODULE_0__.uc,pointStart=new three__WEBPACK_IMPORTED_MODULE_0__.ud,pointEnd=new three__WEBPACK_IMPORTED_MODULE_0__.ud,rotationAxis=new three__WEBPACK_IMPORTED_MODULE_0__.ud,eye=new three__WEBPACK_IMPORTED_MODULE_0__.ud;defineProperty("worldPosition",worldPosition),defineProperty("worldPositionStart",worldPositionStart),defineProperty("worldQuaternion",worldQuaternion),defineProperty("worldQuaternionStart",worldQuaternionStart),defineProperty("cameraPosition",cameraPosition),defineProperty("cameraQuaternion",cameraQuaternion),defineProperty("pointStart",pointStart),defineProperty("pointEnd",pointEnd),defineProperty("rotationAxis",rotationAxis),defineProperty("rotationAngle",0),defineProperty("eye",eye),this._offset=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._startNorm=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._endNorm=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._cameraScale=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._parentPosition=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._parentQuaternion=new three__WEBPACK_IMPORTED_MODULE_0__.uc,this._parentQuaternionInv=new three__WEBPACK_IMPORTED_MODULE_0__.uc,this._parentScale=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._worldScaleStart=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._worldQuaternionInv=new three__WEBPACK_IMPORTED_MODULE_0__.uc,this._worldScale=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._positionStart=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._quaternionStart=new three__WEBPACK_IMPORTED_MODULE_0__.uc,this._scaleStart=new three__WEBPACK_IMPORTED_MODULE_0__.ud,this._getPointer=getPointer.bind(this),this._onPointerDown=onPointerDown.bind(this),this._onPointerHover=onPointerHover.bind(this),this._onPointerMove=onPointerMove.bind(this),this._onPointerUp=onPointerUp.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(pointer){if(void 0===this.object||!0===this.dragging)return;_raycaster.setFromCamera(pointer,this.camera);const intersect=intersectObjectWithRay(this._gizmo.picker[this.mode],_raycaster);this.axis=intersect?intersect.object.name:null}pointerDown(pointer){if(void 0!==this.object&&!0!==this.dragging&&0===pointer.button&&null!==this.axis){_raycaster.setFromCamera(pointer,this.camera);const planeIntersect=intersectObjectWithRay(this._plane,_raycaster,!0);planeIntersect&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(planeIntersect.point).sub(this.worldPositionStart)),this.dragging=!0,_mouseDownEvent.mode=this.mode,this.dispatchEvent(_mouseDownEvent)}}pointerMove(pointer){const axis=this.axis,mode=this.mode,object=this.object;let space=this.space;if("scale"===mode?space="local":"E"!==axis&&"XYZE"!==axis&&"XYZ"!==axis||(space="world"),void 0===object||null===axis||!1===this.dragging||-1!==pointer.button)return;_raycaster.setFromCamera(pointer,this.camera);const planeIntersect=intersectObjectWithRay(this._plane,_raycaster,!0);if(planeIntersect){if(this.pointEnd.copy(planeIntersect.point).sub(this.worldPositionStart),"translate"===mode)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===space&&"XYZ"!==axis&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===axis.indexOf("X")&&(this._offset.x=0),-1===axis.indexOf("Y")&&(this._offset.y=0),-1===axis.indexOf("Z")&&(this._offset.z=0),"local"===space&&"XYZ"!==axis?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),object.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===space&&(object.position.applyQuaternion(_tempQuaternion.copy(this._quaternionStart).invert()),-1!==axis.search("X")&&(object.position.x=Math.round(object.position.x/this.translationSnap)*this.translationSnap),-1!==axis.search("Y")&&(object.position.y=Math.round(object.position.y/this.translationSnap)*this.translationSnap),-1!==axis.search("Z")&&(object.position.z=Math.round(object.position.z/this.translationSnap)*this.translationSnap),object.position.applyQuaternion(this._quaternionStart)),"world"===space&&(object.parent&&object.position.add(_tempVector.setFromMatrixPosition(object.parent.matrixWorld)),-1!==axis.search("X")&&(object.position.x=Math.round(object.position.x/this.translationSnap)*this.translationSnap),-1!==axis.search("Y")&&(object.position.y=Math.round(object.position.y/this.translationSnap)*this.translationSnap),-1!==axis.search("Z")&&(object.position.z=Math.round(object.position.z/this.translationSnap)*this.translationSnap),object.parent&&object.position.sub(_tempVector.setFromMatrixPosition(object.parent.matrixWorld))));else if("scale"===mode){if(-1!==axis.search("XYZ")){let d=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(d*=-1),_tempVector2.set(d,d,d)}else _tempVector.copy(this.pointStart),_tempVector2.copy(this.pointEnd),_tempVector.applyQuaternion(this._worldQuaternionInv),_tempVector2.applyQuaternion(this._worldQuaternionInv),_tempVector2.divide(_tempVector),-1===axis.search("X")&&(_tempVector2.x=1),-1===axis.search("Y")&&(_tempVector2.y=1),-1===axis.search("Z")&&(_tempVector2.z=1);object.scale.copy(this._scaleStart).multiply(_tempVector2),this.scaleSnap&&(-1!==axis.search("X")&&(object.scale.x=Math.round(object.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==axis.search("Y")&&(object.scale.y=Math.round(object.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==axis.search("Z")&&(object.scale.z=Math.round(object.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===mode){this._offset.copy(this.pointEnd).sub(this.pointStart);const ROTATION_SPEED=20/this.worldPosition.distanceTo(_tempVector.setFromMatrixPosition(this.camera.matrixWorld));"E"===axis?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===axis?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(_tempVector.copy(this.rotationAxis).cross(this.eye))*ROTATION_SPEED):"X"!==axis&&"Y"!==axis&&"Z"!==axis||(this.rotationAxis.copy(_unit[axis]),_tempVector.copy(_unit[axis]),"local"===space&&_tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(_tempVector.cross(this.eye).normalize())*ROTATION_SPEED),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===space&&"E"!==axis&&"XYZE"!==axis?(object.quaternion.copy(this._quaternionStart),object.quaternion.multiply(_tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),object.quaternion.copy(_tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),object.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(_changeEvent),this.dispatchEvent(_objectChangeEvent)}}pointerUp(pointer){0===pointer.button&&(this.dragging&&null!==this.axis&&(_mouseUpEvent.mode=this.mode,this.dispatchEvent(_mouseUpEvent)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(child){child.geometry&&child.geometry.dispose(),child.material&&child.material.dispose()}))}attach(object){return this.object=object,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(_changeEvent),this.dispatchEvent(_objectChangeEvent),this.pointStart.copy(this.pointEnd))}getRaycaster(){return _raycaster}getMode(){return this.mode}setMode(mode){this.mode=mode}setTranslationSnap(translationSnap){this.translationSnap=translationSnap}setRotationSnap(rotationSnap){this.rotationSnap=rotationSnap}setScaleSnap(scaleSnap){this.scaleSnap=scaleSnap}setSize(size){this.size=size}setSpace(space){this.space=space}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function getPointer(event){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:event.button};{const rect=this.domElement.getBoundingClientRect();return{x:(event.clientX-rect.left)/rect.width*2-1,y:-(event.clientY-rect.top)/rect.height*2+1,button:event.button}}}function onPointerHover(event){if(this.enabled)switch(event.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(event))}}function onPointerDown(event){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(event.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(event)),this.pointerDown(this._getPointer(event)))}function onPointerMove(event){this.enabled&&this.pointerMove(this._getPointer(event))}function onPointerUp(event){this.enabled&&(this.domElement.releasePointerCapture(event.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(event)))}function intersectObjectWithRay(object,raycaster,includeInvisible){const allIntersections=raycaster.intersectObject(object,!0);for(let i=0;i<allIntersections.length;i++)if(allIntersections[i].object.visible||includeInvisible)return allIntersections[i];return!1}TransformControls.prototype.isTransformControls=!0;const _tempEuler=new three__WEBPACK_IMPORTED_MODULE_0__.R,_alignVector=new three__WEBPACK_IMPORTED_MODULE_0__.ud(0,1,0),_zeroVector=new three__WEBPACK_IMPORTED_MODULE_0__.ud(0,0,0),_lookAtMatrix=new three__WEBPACK_IMPORTED_MODULE_0__.Kb,_tempQuaternion2=new three__WEBPACK_IMPORTED_MODULE_0__.uc,_identityQuaternion=new three__WEBPACK_IMPORTED_MODULE_0__.uc,_dirVector=new three__WEBPACK_IMPORTED_MODULE_0__.ud,_tempMatrix=new three__WEBPACK_IMPORTED_MODULE_0__.Kb,_unitX=new three__WEBPACK_IMPORTED_MODULE_0__.ud(1,0,0),_unitY=new three__WEBPACK_IMPORTED_MODULE_0__.ud(0,1,0),_unitZ=new three__WEBPACK_IMPORTED_MODULE_0__.ud(0,0,1),_v1=new three__WEBPACK_IMPORTED_MODULE_0__.ud,_v2=new three__WEBPACK_IMPORTED_MODULE_0__.ud,_v3=new three__WEBPACK_IMPORTED_MODULE_0__.ud;class TransformControlsGizmo extends three__WEBPACK_IMPORTED_MODULE_0__.ec{constructor(){super(),this.type="TransformControlsGizmo";const gizmoMaterial=new three__WEBPACK_IMPORTED_MODULE_0__.Mb({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),gizmoLineMaterial=new three__WEBPACK_IMPORTED_MODULE_0__.sb({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),matInvisible=gizmoMaterial.clone();matInvisible.opacity=.15;const matHelper=gizmoLineMaterial.clone();matHelper.opacity=.5;const matRed=gizmoMaterial.clone();matRed.color.setHex(16711680);const matGreen=gizmoMaterial.clone();matGreen.color.setHex(65280);const matBlue=gizmoMaterial.clone();matBlue.color.setHex(255);const matRedTransparent=gizmoMaterial.clone();matRedTransparent.color.setHex(16711680),matRedTransparent.opacity=.5;const matGreenTransparent=gizmoMaterial.clone();matGreenTransparent.color.setHex(65280),matGreenTransparent.opacity=.5;const matBlueTransparent=gizmoMaterial.clone();matBlueTransparent.color.setHex(255),matBlueTransparent.opacity=.5;const matWhiteTransparent=gizmoMaterial.clone();matWhiteTransparent.opacity=.25;const matYellowTransparent=gizmoMaterial.clone();matYellowTransparent.color.setHex(16776960),matYellowTransparent.opacity=.25;gizmoMaterial.clone().color.setHex(16776960);const matGray=gizmoMaterial.clone();matGray.color.setHex(7895160);const arrowGeometry=new three__WEBPACK_IMPORTED_MODULE_0__.C(0,.04,.1,12);arrowGeometry.translate(0,.05,0);const scaleHandleGeometry=new three__WEBPACK_IMPORTED_MODULE_0__.m(.08,.08,.08);scaleHandleGeometry.translate(0,.04,0);const lineGeometry=new three__WEBPACK_IMPORTED_MODULE_0__.p;lineGeometry.setAttribute("position",new three__WEBPACK_IMPORTED_MODULE_0__.V([0,0,0,1,0,0],3));const lineGeometry2=new three__WEBPACK_IMPORTED_MODULE_0__.C(.0075,.0075,.5,3);function CircleGeometry(radius,arc){const geometry=new three__WEBPACK_IMPORTED_MODULE_0__.gd(radius,.0075,3,64,arc*Math.PI*2);return geometry.rotateY(Math.PI/2),geometry.rotateX(Math.PI/2),geometry}lineGeometry2.translate(0,.25,0);const gizmoTranslate={X:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(arrowGeometry,matRed),[.5,0,0],[0,0,-Math.PI/2]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(arrowGeometry,matRed),[-.5,0,0],[0,0,Math.PI/2]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(lineGeometry2,matRed),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(arrowGeometry,matGreen),[0,.5,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(arrowGeometry,matGreen),[0,-.5,0],[Math.PI,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(lineGeometry2,matGreen)]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(arrowGeometry,matBlue),[0,0,.5],[Math.PI/2,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(arrowGeometry,matBlue),[0,0,-.5],[-Math.PI/2,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(lineGeometry2,matBlue),null,[Math.PI/2,0,0]]],XYZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.hc(.1,0),matWhiteTransparent.clone()),[0,0,0]]],XY:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.15,.15,.01),matBlueTransparent.clone()),[.15,.15,0]]],YZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.15,.15,.01),matRedTransparent.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.15,.15,.01),matGreenTransparent.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},pickerTranslate={X:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[.3,0,0],[0,0,-Math.PI/2]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,.3,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,-.3,0],[0,0,Math.PI]]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,0,.3],[Math.PI/2,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.hc(.2,0),matInvisible)]],XY:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.01),matInvisible),[.15,.15,0]]],YZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.01),matInvisible),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.01),matInvisible),[.15,0,.15],[-Math.PI/2,0,0]]]},helperTranslate={START:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.hc(.01,2),matHelper),null,null,null,"helper"]],END:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.hc(.01,2),matHelper),null,null,null,"helper"]],DELTA:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(function TranslateHelperGeometry(){const geometry=new three__WEBPACK_IMPORTED_MODULE_0__.p;return geometry.setAttribute("position",new three__WEBPACK_IMPORTED_MODULE_0__.V([0,0,0,1,1,1],3)),geometry}(),matHelper),null,null,null,"helper"]],X:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},gizmoRotate={XYZE:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(CircleGeometry(.5,1),matGray),null,[0,Math.PI/2,0]]],X:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(CircleGeometry(.5,.5),matRed)]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(CircleGeometry(.5,.5),matGreen),null,[0,0,-Math.PI/2]]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(CircleGeometry(.5,.5),matBlue),null,[0,Math.PI/2,0]]],E:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(CircleGeometry(.75,1),matYellowTransparent),null,[0,Math.PI/2,0]]]},helperRotate={AXIS:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},pickerRotate={XYZE:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.Tc(.25,10,8),matInvisible)]],X:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.gd(.5,.1,4,24),matInvisible),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.gd(.5,.1,4,24),matInvisible),[0,0,0],[Math.PI/2,0,0]]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.gd(.5,.1,4,24),matInvisible),[0,0,0],[0,0,-Math.PI/2]]],E:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.gd(.75,.1,2,24),matInvisible)]]},gizmoScale={X:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(scaleHandleGeometry,matRed),[.5,0,0],[0,0,-Math.PI/2]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(lineGeometry2,matRed),[0,0,0],[0,0,-Math.PI/2]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(scaleHandleGeometry,matRed),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(scaleHandleGeometry,matGreen),[0,.5,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(lineGeometry2,matGreen)],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(scaleHandleGeometry,matGreen),[0,-.5,0],[0,0,Math.PI]]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(scaleHandleGeometry,matBlue),[0,0,.5],[Math.PI/2,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(lineGeometry2,matBlue),[0,0,0],[Math.PI/2,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(scaleHandleGeometry,matBlue),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.15,.15,.01),matBlueTransparent),[.15,.15,0]]],YZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.15,.15,.01),matRedTransparent),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.15,.15,.01),matGreenTransparent),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.1,.1,.1),matWhiteTransparent.clone())]]},pickerScale={X:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[.3,0,0],[0,0,-Math.PI/2]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,.3,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,-.3,0],[0,0,Math.PI]]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,0,.3],[Math.PI/2,0,0]],[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.C(.2,0,.6,4),matInvisible),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.01),matInvisible),[.15,.15,0]]],YZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.01),matInvisible),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.01),matInvisible),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new three__WEBPACK_IMPORTED_MODULE_0__.Lb(new three__WEBPACK_IMPORTED_MODULE_0__.m(.2,.2,.2),matInvisible),[0,0,0]]]},helperScale={X:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new three__WEBPACK_IMPORTED_MODULE_0__.qb(lineGeometry,matHelper.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function setupGizmo(gizmoMap){const gizmo=new three__WEBPACK_IMPORTED_MODULE_0__.ec;for(const name in gizmoMap)for(let i=gizmoMap[name].length;i--;){const object=gizmoMap[name][i][0].clone(),position=gizmoMap[name][i][1],rotation=gizmoMap[name][i][2],scale=gizmoMap[name][i][3],tag=gizmoMap[name][i][4];object.name=name,object.tag=tag,position&&object.position.set(position[0],position[1],position[2]),rotation&&object.rotation.set(rotation[0],rotation[1],rotation[2]),scale&&object.scale.set(scale[0],scale[1],scale[2]),object.updateMatrix();const tempGeometry=object.geometry.clone();tempGeometry.applyMatrix4(object.matrix),object.geometry=tempGeometry,object.renderOrder=1/0,object.position.set(0,0,0),object.rotation.set(0,0,0),object.scale.set(1,1,1),gizmo.add(object)}return gizmo}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=setupGizmo(gizmoTranslate)),this.add(this.gizmo.rotate=setupGizmo(gizmoRotate)),this.add(this.gizmo.scale=setupGizmo(gizmoScale)),this.add(this.picker.translate=setupGizmo(pickerTranslate)),this.add(this.picker.rotate=setupGizmo(pickerRotate)),this.add(this.picker.scale=setupGizmo(pickerScale)),this.add(this.helper.translate=setupGizmo(helperTranslate)),this.add(this.helper.rotate=setupGizmo(helperRotate)),this.add(this.helper.scale=setupGizmo(helperScale)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(force){const quaternion="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:_identityQuaternion;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let handles=[];handles=handles.concat(this.picker[this.mode].children),handles=handles.concat(this.gizmo[this.mode].children),handles=handles.concat(this.helper[this.mode].children);for(let i=0;i<handles.length;i++){const handle=handles[i];let factor;if(handle.visible=!0,handle.rotation.set(0,0,0),handle.position.copy(this.worldPosition),factor=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),handle.scale.set(1,1,1).multiplyScalar(factor*this.size/4),"helper"!==handle.tag){if(handle.quaternion.copy(quaternion),"translate"===this.mode||"scale"===this.mode){const AXIS_HIDE_TRESHOLD=.99,PLANE_HIDE_TRESHOLD=.2;"X"===handle.name&&Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye))>AXIS_HIDE_TRESHOLD&&(handle.scale.set(1e-10,1e-10,1e-10),handle.visible=!1),"Y"===handle.name&&Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye))>AXIS_HIDE_TRESHOLD&&(handle.scale.set(1e-10,1e-10,1e-10),handle.visible=!1),"Z"===handle.name&&Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye))>AXIS_HIDE_TRESHOLD&&(handle.scale.set(1e-10,1e-10,1e-10),handle.visible=!1),"XY"===handle.name&&Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye))<PLANE_HIDE_TRESHOLD&&(handle.scale.set(1e-10,1e-10,1e-10),handle.visible=!1),"YZ"===handle.name&&Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye))<PLANE_HIDE_TRESHOLD&&(handle.scale.set(1e-10,1e-10,1e-10),handle.visible=!1),"XZ"===handle.name&&Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye))<PLANE_HIDE_TRESHOLD&&(handle.scale.set(1e-10,1e-10,1e-10),handle.visible=!1)}else"rotate"===this.mode&&(_tempQuaternion2.copy(quaternion),_alignVector.copy(this.eye).applyQuaternion(_tempQuaternion.copy(quaternion).invert()),-1!==handle.name.search("E")&&handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(this.eye,_zeroVector,_unitY)),"X"===handle.name&&(_tempQuaternion.setFromAxisAngle(_unitX,Math.atan2(-_alignVector.y,_alignVector.z)),_tempQuaternion.multiplyQuaternions(_tempQuaternion2,_tempQuaternion),handle.quaternion.copy(_tempQuaternion)),"Y"===handle.name&&(_tempQuaternion.setFromAxisAngle(_unitY,Math.atan2(_alignVector.x,_alignVector.z)),_tempQuaternion.multiplyQuaternions(_tempQuaternion2,_tempQuaternion),handle.quaternion.copy(_tempQuaternion)),"Z"===handle.name&&(_tempQuaternion.setFromAxisAngle(_unitZ,Math.atan2(_alignVector.y,_alignVector.x)),_tempQuaternion.multiplyQuaternions(_tempQuaternion2,_tempQuaternion),handle.quaternion.copy(_tempQuaternion)));handle.visible=handle.visible&&(-1===handle.name.indexOf("X")||this.showX),handle.visible=handle.visible&&(-1===handle.name.indexOf("Y")||this.showY),handle.visible=handle.visible&&(-1===handle.name.indexOf("Z")||this.showZ),handle.visible=handle.visible&&(-1===handle.name.indexOf("E")||this.showX&&this.showY&&this.showZ),handle.material._color=handle.material._color||handle.material.color.clone(),handle.material._opacity=handle.material._opacity||handle.material.opacity,handle.material.color.copy(handle.material._color),handle.material.opacity=handle.material._opacity,this.enabled&&this.axis&&(handle.name===this.axis||this.axis.split("").some((function(a){return handle.name===a})))&&(handle.material.color.setHex(16776960),handle.material.opacity=1)}else handle.visible=!1,"AXIS"===handle.name?(handle.position.copy(this.worldPositionStart),handle.visible=!!this.axis,"X"===this.axis&&(_tempQuaternion.setFromEuler(_tempEuler.set(0,0,0)),handle.quaternion.copy(quaternion).multiply(_tempQuaternion),Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye))>.9&&(handle.visible=!1)),"Y"===this.axis&&(_tempQuaternion.setFromEuler(_tempEuler.set(0,0,Math.PI/2)),handle.quaternion.copy(quaternion).multiply(_tempQuaternion),Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye))>.9&&(handle.visible=!1)),"Z"===this.axis&&(_tempQuaternion.setFromEuler(_tempEuler.set(0,Math.PI/2,0)),handle.quaternion.copy(quaternion).multiply(_tempQuaternion),Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye))>.9&&(handle.visible=!1)),"XYZE"===this.axis&&(_tempQuaternion.setFromEuler(_tempEuler.set(0,Math.PI/2,0)),_alignVector.copy(this.rotationAxis),handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(_zeroVector,_alignVector,_unitY)),handle.quaternion.multiply(_tempQuaternion),handle.visible=this.dragging),"E"===this.axis&&(handle.visible=!1)):"START"===handle.name?(handle.position.copy(this.worldPositionStart),handle.visible=this.dragging):"END"===handle.name?(handle.position.copy(this.worldPosition),handle.visible=this.dragging):"DELTA"===handle.name?(handle.position.copy(this.worldPositionStart),handle.quaternion.copy(this.worldQuaternionStart),_tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),_tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),handle.scale.copy(_tempVector),handle.visible=this.dragging):(handle.quaternion.copy(quaternion),this.dragging?handle.position.copy(this.worldPositionStart):handle.position.copy(this.worldPosition),this.axis&&(handle.visible=-1!==this.axis.search(handle.name)))}super.updateMatrixWorld(force)}}TransformControlsGizmo.prototype.isTransformControlsGizmo=!0;class TransformControlsPlane extends three__WEBPACK_IMPORTED_MODULE_0__.Lb{constructor(){super(new three__WEBPACK_IMPORTED_MODULE_0__.oc(1e5,1e5,2,2),new three__WEBPACK_IMPORTED_MODULE_0__.Mb({visible:!1,wireframe:!0,side:three__WEBPACK_IMPORTED_MODULE_0__.M,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(force){let space=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(space="local"),_v1.copy(_unitX).applyQuaternion("local"===space?this.worldQuaternion:_identityQuaternion),_v2.copy(_unitY).applyQuaternion("local"===space?this.worldQuaternion:_identityQuaternion),_v3.copy(_unitZ).applyQuaternion("local"===space?this.worldQuaternion:_identityQuaternion),_alignVector.copy(_v2),this.mode){case"translate":case"scale":switch(this.axis){case"X":_alignVector.copy(this.eye).cross(_v1),_dirVector.copy(_v1).cross(_alignVector);break;case"Y":_alignVector.copy(this.eye).cross(_v2),_dirVector.copy(_v2).cross(_alignVector);break;case"Z":_alignVector.copy(this.eye).cross(_v3),_dirVector.copy(_v3).cross(_alignVector);break;case"XY":_dirVector.copy(_v3);break;case"YZ":_dirVector.copy(_v1);break;case"XZ":_alignVector.copy(_v3),_dirVector.copy(_v2);break;case"XYZ":case"E":_dirVector.set(0,0,0)}break;default:_dirVector.set(0,0,0)}0===_dirVector.length()?this.quaternion.copy(this.cameraQuaternion):(_tempMatrix.lookAt(_tempVector.set(0,0,0),_dirVector,_alignVector),this.quaternion.setFromRotationMatrix(_tempMatrix)),super.updateMatrixWorld(force)}}TransformControlsPlane.prototype.isTransformControlsPlane=!0}}]);